{% extends "ClientWebsiteBundle:views:master.html.twig" %}

{% block meta %}{% include "ClientWebsiteBundle:blocks:meta.html.twig" %}{% endblock %}

{% block title %}{{ content.title }}{% endblock %}

{% block content %}
    <div id="content" vocab="http://schema.org/" typeof="Content">

        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header" property="title">{{ content.title }}</h1>
                {% autoescape false %}
                <div property="article">{{ content.article }}</div>
                {% endautoescape %}
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <h2>Smart-Content</h2>
            </div>

            <ul class="pagination">
                {% set page = 1 %}
                {% if request.get.p is defined %}
                    {% set page = request.get.p %}
                {% endif %}

                {% if page-1 >= 1 %}
                    <li><a href="{{ content_path(content.url) }}?p={{ page-1 }}">&laquo;</a></li>
                {% endif %}
                <li><a href="{{ content_path(content.url) }}?p={{ page+1 }}">&raquo;</a></li>
            </ul>

            <div property="smartcontent">
                {% for page in content.smartcontent %}
                    <div class="col-lg-4">
                        <h2>
                            <a href="{{ content_path(page.resourceLocator) }}">{{ page.title }}</a>
                        </h2>
                        {% autoescape false %}
                        {% if page.article is defined %}
                            {{ page.article|slice(0, 50) }}
                        {% else %}
                            <p>No Article found</p>
                        {% endif %}
                        {% endautoescape %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
